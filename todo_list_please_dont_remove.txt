
To-do list for SPECFEM3D, by Dimitri Komatitsch
-----------------------------------------------

- we should keep and modify the old mesher from SPECFEM3D_BASIN in order
to be able to quickly generate an analytical mesh for a simple basin without
using CUBIT, because many users may still want to be able to use the old and
simple mesher and not the (more complex) CUBIT package, and/or they might not
have access to CUBIT. Therefore the old mesher should be modified to save its
files in CUBIT/Abaqus format so that they can be used as input to "decompose_mesh".

- Regarding domain decomposition we should forget about both
METIS and ParMETIS, which are both inefficient
for very large meshes. Pieyre has done detailed tests (Pieyre,
could you please send the Excel file to all of us with a few lines
of description of the figures?).
SCOTCH (serial) and PT-SCOTCH (parallel) is much better.
(faster, uses far less memory etc.)
Because of that, we have removed support for METIS in SESAME.
It can still be called indirectly from SCOTCH (there is an option
in SCOTCH to call METIS instead). But this is a bad idea because
the partition obtained is worse. 

- Regarding memory size (getting an estimate of memory consumption in SESAME),
somebody should just cut and paste my SPECFEM3D_GLOBE routine
"SPECFEM3D_GLOBE/version41_beta/src/memory_eval.f90", which
I call from "SPECFEM3D_GLOBE/version41_beta/src/create_header_file.f90".
It would work for SESAME as well (with minor modifications).

- re-add the kernel calculations

- add SOURCESOLUTION in addition to CMTSOLUTION, to choose between a CMT source and a force source

- put a flag to choose between a Ricker source and a Heaviside source when a force source is used
(we can cut and paste the Heaviside implementation from the case of a CMT source)

- automatic detection (coloring / flags) of the free surface and of the PML absorbing elements in CUBIT;
read this from input files in the solver

- Pieyre should add C-PML following Roland's 2D implementation

- should add support for parMETIS or PT-Scotch (i.e. decompose the mesh in parallel rather than serial; this will be required for very large meshes, too large to fit on a serial machine)

- etudier comment lire un maillage CUBIT stocke au format natif de CUBIT (Exodus, base sur netCDF) depuis SPECFEM3D. On pourrait utiliser la commande "ncdump" dans CUBIT si necessaire d'après Emanuele Casarotti. Une autre option serait d'utiliser le format de stockage ABAQUS dans CUBIT.

---------------------------------------------------------------------------------
---------------------------------------------------------------------------------
---------------------------------------------------------------------------------
---------------------------------------------------------------------------------

Things to add later to the manual:
----------------------------------

- Here is how to run the code:

1/ creer un maillage CUBIT

2/ controler sa qualite avec mon code Fortran
"check_mesh_quality_CUBIT_Abaqus"

2/ le decomposer avec "decompose_mesh_SCOTCH"

3/ eventuellement le decimer avec "decimate_mesh"

4/ creer les bases de donnees et les matrices avec "generate_databases.f90"

5/ tourner le solveur "specfem3D.f90"

- remove old things from SPECFEM3D_BASIN in the manual and add new things
related to CUBIT, METIS, SCOTCH etc. Add new figures showing the asteroid
example etc

---------------------------------------------------------------------------------
---------------------------------------------------------------------------------
---------------------------------------------------------------------------------
---------------------------------------------------------------------------------

Done:
-----

